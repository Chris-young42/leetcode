/**
 * @param {character[][]} board - å­—ç¬¦ç½‘æ ¼ï¼ˆäºŒç»´æ•°ç»„ï¼‰
 * @param {string} word - è¦æœç´¢çš„ç›®æ ‡å•è¯
 * @return {boolean} - è¿”å›æ˜¯å¦èƒ½åœ¨ç½‘æ ¼ä¸­æ‰¾åˆ°è¯¥å•è¯
 */
var exist = function(board, word) {
    const m = board.length;       // è¡Œæ•°
    const n = board[0].length;    // åˆ—æ•°

    /**
     * æ·±åº¦ä¼˜å…ˆæœç´¢ DFS
     * @param {number} i - å½“å‰æ‰€åœ¨çš„è¡Œ
     * @param {number} j - å½“å‰æ‰€åœ¨çš„åˆ—
     * @param {number} k - å½“å‰åŒ¹é…åˆ°å•è¯çš„ç¬¬å‡ ä¸ªå­—ç¬¦
     * @return {boolean} - æ˜¯å¦èƒ½ä»è¿™é‡Œå¾€ä¸‹åŒ¹é…æˆåŠŸ
     */
    function dfs(i, j, k) {
        // âŒ 1. å½“å‰æ ¼å­çš„å­—æ¯å’Œç›®æ ‡å•è¯å¯¹åº”ä½ç½®çš„å­—æ¯ä¸ä¸€è‡´
        if (board[i][j] !== word[k]) {
            return false; // åŒ¹é…å¤±è´¥
        }

        // âœ… 2. å¦‚æœ k å·²ç»åˆ°äº†æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”ä¹ŸåŒ¹é…æˆåŠŸï¼Œè¯´æ˜æ•´ä¸²å•è¯æ‰¾åˆ°äº†
        if (k + 1 === word.length) {
            return true;
        }

        // ğŸš« 3. æ ‡è®°è¿™ä¸ªæ ¼å­å·²ç»è®¿é—®è¿‡
        // å› ä¸ºé¢˜ç›®ä¸å…è®¸ä¸€ä¸ªæ ¼å­åœ¨ä¸€æ¬¡æœç´¢ä¸­è¢«é‡å¤ä½¿ç”¨
        const temp = board[i][j]; 
        board[i][j] = 0;  // ä»»æ„éå­—æ¯å€¼éƒ½è¡Œï¼Œè¿™é‡Œç”¨ 0

        // â¬…ï¸ â¡ï¸ â¬†ï¸ â¬‡ï¸ å››ä¸ªæ–¹å‘æ¢ç´¢ç›¸é‚»æ ¼å­
        for (const [x, y] of [[i, j - 1], [i, j + 1], [i - 1, j], [i + 1, j]]) {
            // åˆ¤æ–­è¾¹ç•Œï¼Œé˜²æ­¢è¶Šç•Œ
            if (0 <= x && x < m && 0 <= y && y < n) {
                // é€’å½’æœç´¢ä¸‹ä¸€ä¸ªå­—ç¬¦
                if (dfs(x, y, k + 1)) {
                    return true; // å¦‚æœåœ¨æŸä¸ªæ–¹å‘æ‰¾åˆ°äº†ï¼Œå°±ç›´æ¥è¿”å› true
                }
            }
        }

        // ğŸ§¹ 4. æ¢å¤ç°åœºï¼ˆå›æº¯ï¼‰
        // è¿™ä¸ªæ ¼å­ç•™ç»™åé¢å…¶ä»–è·¯å¾„ä½¿ç”¨
        board[i][j] = temp;

        // âŒ 5. å››ä¸ªæ–¹å‘éƒ½æ²¡æ‰¾åˆ°ï¼Œè¿”å› false
        return false;
    }

    // ğŸ ä»ç½‘æ ¼ä¸­çš„æ¯ä¸€ä¸ªèµ·ç‚¹å‡ºå‘ï¼Œå°è¯•åŒ¹é…å•è¯
    for (let i = 0; i < m; i++) {
        for (let j = 0; j < n; j++) {
            if (dfs(i, j, 0)) {   // ä» (i, j) å¼€å§‹åŒ¹é… word[0]
                return true;     // åªè¦æœ‰ä¸€æ¡è·¯å¾„æˆåŠŸï¼Œå°±è¿”å› true
            }
        }
    }

    // âŒ æ•´ä¸ªç½‘æ ¼éƒ½æ‰¾ä¸åˆ°ï¼Œè¿”å› false
    return false;
};
